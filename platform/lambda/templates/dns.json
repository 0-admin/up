{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Resources": {
    {{range .DNS.Zones -}}
      "{{.ID}}": {
        "Type": "AWS::Route53::HostedZone",
        "Properties": {
          "Name": "{{.Name}}",
          "HostedZoneConfig": {
            "Comment": "{{.Description}} – Managed by Up"
          }
        }
      },
    {{end -}}
    {{range $zone := .DNS.Zones -}}
      {{range $zone.Records}}
        "{{printf "%s%s" $zone.ID .ID }}": {
          "Type": "AWS::Route53::RecordSet",
          "Properties": {
            "Name": "{{.Name}}",
            "Type": "{{.Type}}",
            "TTL": "{{.TTL}}",
            "ResourceRecords": [
              {{range $i, $v := .Value -}}
                {{if $i}},{{end}}
                "{{$v}}"
              {{end}}
            ],
            "HostedZoneId": { "Ref": "{{$zone.ID}}" },
            "Comment": "{{.Description}} – Managed by Up",
          }
        },
      {{end -}}
    {{end -}}
  }
}
